"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/auth/login/page",{

/***/ "(app-pages-browser)/./src/lib/hooks/useAuth.ts":
/*!**********************************!*\
  !*** ./src/lib/hooks/useAuth.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuth: function() { return /* binding */ useAuth; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _lib_services_authApi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/services/authApi */ \"(app-pages-browser)/./src/lib/services/authApi.ts\");\n/* harmony import */ var _lib_features_carts_cartsSlice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/features/carts/cartsSlice */ \"(app-pages-browser)/./src/lib/features/carts/cartsSlice.ts\");\n/* harmony import */ var _useToast__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useToast */ \"(app-pages-browser)/./src/lib/hooks/useToast.ts\");\n/* harmony import */ var _redux__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./redux */ \"(app-pages-browser)/./src/lib/hooks/redux.tsx\");\n// // lib/hooks/useAuth.ts\n// import { useEffect, useState } from 'react';\n// import { useRouter } from 'next/navigation';\n// import {\n//   useLoginMutation,\n//   useRegisterMutation,\n//   useLogoutMutation,\n//   useGetMeQuery,\n// } from '@/lib/services/authApi';\n// import { mergeCarts } from '@/lib/features/carts/cartsSlice';\n// import { useToast } from './useToast';\n// import type { LoginData, RegisterData, User } from '@/types';\n// import { RootState } from '../store';\n// import { useAppDispatch, useAppSelector } from './redux';\n// export const useAuth = () => {\n//   const router = useRouter();\n//   const dispatch = useAppDispatch();\n//   const { success, error: showError, info } = useToast();\n//   // RTK Query hooks\n//   const [loginApi, { isLoading: isLoginLoading }] = useLoginMutation();\n//   const [registerApi, { isLoading: isRegisterLoading }] = useRegisterMutation();\n//   const [logoutApi] = useLogoutMutation();\n//   const { data: user, isLoading: isMeLoading, isError: isMeError, refetch } = useGetMeQuery();\n//   // Cart state\n//   const guestCart = useAppSelector((state:RootState) => state.cart.guestCart);\n//   const needsCartMerge = guestCart.length > 0;\n//   // Local auth state\n//   const [isAuthenticated, setIsAuthenticated] = useState(false);\n//   // Sync RTK Query `getMe` → local state\n//   useEffect(() => {\n//     if (isMeLoading) return;\n//     if (user) {\n//       setIsAuthenticated(true);\n//     } else {\n//       setIsAuthenticated(false);\n//     }\n//   }, [user, isMeLoading]);\n//   /* ==================== LOGIN ==================== */\n//   const login = async (credentials: LoginData) => {\n//     try {\n//       const response = await loginApi(credentials).unwrap();\n//       if (!response.success) {\n//         showError(response.message || 'Login failed');\n//         throw new Error(response.message);\n//       }\n//       // User is now in RTK Query cache via `invalidatesTags`\n//       success(response.message || 'Welcome back!');\n//       // Merge guest cart\n//       if (needsCartMerge) {\n//         try {\n//           await dispatch(mergeCarts()).unwrap();\n//           success('Your cart has been merged!');\n//         } catch (err) {\n//           info('Cart sync failed. Items still available.');\n//         }\n//       }\n//       router.push('/');\n//       return response;\n//     } catch (error: any) {\n//       const msg =\n//         error?.data?.message ||\n//         error?.message ||\n//         (error?.status === 401 && 'Invalid email or password') ||\n//         'Login failed. Please try again.';\n//       showError(msg);\n//       throw error;\n//     }\n//   };\n//   /* ==================== REGISTER ==================== */\n//   const register = async (userData: RegisterData) => {\n//     try {\n//       const response = await registerApi(userData).unwrap();\n//       if (!response.success) {\n//         showError(response.message || 'Registration failed');\n//         throw new Error(response.message);\n//       }\n//       success(response.message || 'Account created! Welcome!');\n//       if (needsCartMerge) {\n//         try {\n//           await dispatch(mergeCarts()).unwrap();\n//           success('Cart merged successfully!');\n//         } catch (err) {\n//           info('Cart sync failed. Items still available.');\n//         }\n//       }\n//       router.push('/');\n//       return response;\n//     } catch (error: any) {\n//       const msg =\n//         error?.data?.message ||\n//         error?.message ||\n//         (error?.status === 409 && 'Email already exists') ||\n//         'Registration failed.';\n//       showError(msg);\n//       throw error;\n//     }\n//   };\n//   /* ==================== LOGOUT ==================== */\n//   const logout = async () => {\n//     try {\n//       const response = await logoutApi().unwrap();\n//       success(response.message || 'Logged out successfully');\n//     } catch (err) {\n//       info('Logged out locally');\n//     } finally {\n//       setIsAuthenticated(false);\n//       router.push('/auth/login');\n//     }\n//   };\n//   /* ==================== CHECK AUTH (on mount) ==================== */\n//   const checkAuth = async () => {\n//     if (isMeLoading) return;\n//     if (isMeError) {\n//       setIsAuthenticated(false);\n//       return null;\n//     }\n//     refetch(); // Ensure fresh data\n//     return user;\n//   };\n//   /* ==================== UPDATE PROFILE (optimistic) ==================== */\n//   const updateProfile = async (userData: Partial<User>) => {\n//     // Assuming you have updateProfile mutation in authApi\n//     // For now, optimistic update\n//     dispatch({ type: 'auth/updateUser', payload: userData });\n//     success('Profile updated!');\n//   };\n//   return {\n//     // State\n//     user,\n//     isAuthenticated,\n//     isLoading: isLoginLoading || isRegisterLoading || isMeLoading,\n//     // Actions\n//     login,\n//     register,\n//     logout,\n//     checkAuth,\n//     updateProfile,\n//     // Helpers\n//     refetchUser: refetch,\n//     isMeError,\n//   };\n// };\n// lib/hooks/useAuth.ts\n\n\n\n\n\n\nconst useAuth = ()=>{\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_1__.useRouter)();\n    const dispatch = (0,_redux__WEBPACK_IMPORTED_MODULE_5__.useAppDispatch)();\n    const { success, error: showError, info } = (0,_useToast__WEBPACK_IMPORTED_MODULE_4__.useToast)();\n    // RTK Query hooks\n    const [loginApi, { isLoading: isLoginLoading }] = (0,_lib_services_authApi__WEBPACK_IMPORTED_MODULE_2__.useLoginMutation)();\n    const [registerApi, { isLoading: isRegisterLoading }] = (0,_lib_services_authApi__WEBPACK_IMPORTED_MODULE_2__.useRegisterMutation)();\n    const [logoutApi] = (0,_lib_services_authApi__WEBPACK_IMPORTED_MODULE_2__.useLogoutMutation)();\n    // GET ME: Trigger on mount\n    const { data: user, isLoading: isMeLoading, isError: isMeError, refetch } = (0,_lib_services_authApi__WEBPACK_IMPORTED_MODULE_2__.useGetMeQuery)(undefined, {\n        refetchOnMountOrArgChange: true\n    });\n    // Cart state\n    const guestCart = (0,_redux__WEBPACK_IMPORTED_MODULE_5__.useAppSelector)((state)=>state.cart.guestCart);\n    const needsCartMerge = guestCart.length > 0;\n    // Local auth state\n    const [isAuthenticated, setIsAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Sync user → isAuthenticated\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (isMeLoading) return;\n        setIsAuthenticated(!!user);\n    }, [\n        user,\n        isMeLoading\n    ]);\n    // Refetch on mount (critical)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        refetch();\n    }, [\n        refetch\n    ]);\n    /* ==================== LOGIN ==================== */ const login = async (credentials)=>{\n        try {\n            const response = await loginApi(credentials).unwrap();\n            if (!response.success) throw new Error(response.message);\n            success(response.message || \"Welcome back!\");\n            if (needsCartMerge) {\n                try {\n                    await dispatch((0,_lib_features_carts_cartsSlice__WEBPACK_IMPORTED_MODULE_3__.mergeCarts)()).unwrap();\n                    success(\"Cart merged!\");\n                } catch (e) {\n                    info(\"Cart sync failed\");\n                }\n            }\n            router.push(\"/\");\n            return response;\n        } catch (error) {\n            var _error_data;\n            const msg = (error === null || error === void 0 ? void 0 : (_error_data = error.data) === null || _error_data === void 0 ? void 0 : _error_data.message) || (error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : error.status) === 401 && \"Invalid credentials\" || \"Login failed\";\n            showError(msg);\n            throw error;\n        }\n    };\n    /* ==================== REGISTER ==================== */ const register = async (userData)=>{\n        try {\n            const response = await registerApi(userData).unwrap();\n            if (!response.success) throw new Error(response.message);\n            success(\"Account created!\");\n            if (needsCartMerge) {\n                try {\n                    await dispatch((0,_lib_features_carts_cartsSlice__WEBPACK_IMPORTED_MODULE_3__.mergeCarts)()).unwrap();\n                    success(\"Cart merged!\");\n                } catch (e) {\n                    info(\"Cart sync failed\");\n                }\n            }\n            router.push(\"/\");\n            return response;\n        } catch (error) {\n            var _error_data;\n            const msg = (error === null || error === void 0 ? void 0 : (_error_data = error.data) === null || _error_data === void 0 ? void 0 : _error_data.message) || (error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : error.status) === 409 && \"Email exists\" || \"Registration failed\";\n            showError(msg);\n            throw error;\n        }\n    };\n    /* ==================== LOGOUT ==================== */ const logout = async ()=>{\n        try {\n            await logoutApi().unwrap();\n            success(\"Logged out\");\n        } catch (e) {\n            info(\"Logged out locally\");\n        } finally{\n            setIsAuthenticated(false);\n            router.push(\"/auth/login\");\n        }\n    };\n    return {\n        user,\n        isAuthenticated,\n        isLoading: isLoginLoading || isRegisterLoading || isMeLoading,\n        login,\n        register,\n        logout,\n        refetchUser: refetch,\n        isMeError\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvaG9va3MvdXNlQXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLDBCQUEwQjtBQUMxQiwrQ0FBK0M7QUFDL0MsK0NBQStDO0FBQy9DLFdBQVc7QUFDWCxzQkFBc0I7QUFDdEIseUJBQXlCO0FBQ3pCLHVCQUF1QjtBQUN2QixtQkFBbUI7QUFDbkIsbUNBQW1DO0FBRW5DLGdFQUFnRTtBQUNoRSx5Q0FBeUM7QUFDekMsZ0VBQWdFO0FBQ2hFLHdDQUF3QztBQUN4Qyw0REFBNEQ7QUFFNUQsaUNBQWlDO0FBQ2pDLGdDQUFnQztBQUNoQyx1Q0FBdUM7QUFDdkMsNERBQTREO0FBRTVELHVCQUF1QjtBQUN2QiwwRUFBMEU7QUFDMUUsbUZBQW1GO0FBQ25GLDZDQUE2QztBQUM3QyxpR0FBaUc7QUFFakcsa0JBQWtCO0FBQ2xCLGlGQUFpRjtBQUNqRixpREFBaUQ7QUFFakQsd0JBQXdCO0FBQ3hCLG1FQUFtRTtBQUVuRSw0Q0FBNEM7QUFDNUMsc0JBQXNCO0FBQ3RCLCtCQUErQjtBQUMvQixrQkFBa0I7QUFDbEIsa0NBQWtDO0FBQ2xDLGVBQWU7QUFDZixtQ0FBbUM7QUFDbkMsUUFBUTtBQUNSLDZCQUE2QjtBQUU3QiwwREFBMEQ7QUFDMUQsc0RBQXNEO0FBQ3RELFlBQVk7QUFDWiwrREFBK0Q7QUFFL0QsaUNBQWlDO0FBQ2pDLHlEQUF5RDtBQUN6RCw2Q0FBNkM7QUFDN0MsVUFBVTtBQUVWLGdFQUFnRTtBQUNoRSxzREFBc0Q7QUFFdEQsNEJBQTRCO0FBQzVCLDhCQUE4QjtBQUM5QixnQkFBZ0I7QUFDaEIsbURBQW1EO0FBQ25ELG1EQUFtRDtBQUNuRCwwQkFBMEI7QUFDMUIsOERBQThEO0FBQzlELFlBQVk7QUFDWixVQUFVO0FBRVYsMEJBQTBCO0FBQzFCLHlCQUF5QjtBQUN6Qiw2QkFBNkI7QUFDN0Isb0JBQW9CO0FBQ3BCLGtDQUFrQztBQUNsQyw0QkFBNEI7QUFDNUIsb0VBQW9FO0FBQ3BFLDZDQUE2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T0FBTzFCLE9BQVk7Z0JBRWpCQTtZQURGLE1BQU0rQixNQUNKL0IsQ0FBQUEsa0JBQUFBLDZCQUFBQSxjQUFBQSxNQUFPUyxJQUFJLGNBQVhULGtDQUFBQSxZQUFhNkIsT0FBTyxNQUNwQjdCLGtCQUFBQSw0QkFBQUEsTUFBTzZCLE9BQU8sS0FDYjdCLENBQUFBLGtCQUFBQSw0QkFBQUEsTUFBT2dDLE1BQU0sTUFBSyxPQUFPLGtCQUMxQjtZQUNGL0IsVUFBVThCO1lBQ1YsTUFBTS9CO1FBQ1I7SUFDRjtJQUVBLG9EQUFvRCxHQUNwRCxNQUFNbUMsU0FBUztRQUNiLElBQUk7WUFDRixNQUFNM0IsWUFBWW1CLE1BQU07WUFDeEI1QixRQUFRO1FBQ1YsRUFBRSxVQUFNO1lBQ05HLEtBQUs7UUFDUCxTQUFVO1lBQ1JxQixtQkFBbUI7WUFDbkIxQixPQUFPaUMsSUFBSSxDQUFDO1FBQ2Q7SUFDRjtJQUVBLE9BQU87UUFDTHBCO1FBQ0FZO1FBQ0FsQixXQUFXQyxrQkFBa0JFLHFCQUFxQkk7UUFFbERhO1FBQ0FTO1FBQ0FFO1FBQ0FDLGFBQWF0QjtRQUNiRDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL2hvb2tzL3VzZUF1dGgudHM/YzkwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAvLyBsaWIvaG9va3MvdXNlQXV0aC50c1xuLy8gaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0Jztcbi8vIGltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG4vLyBpbXBvcnQge1xuLy8gICB1c2VMb2dpbk11dGF0aW9uLFxuLy8gICB1c2VSZWdpc3Rlck11dGF0aW9uLFxuLy8gICB1c2VMb2dvdXRNdXRhdGlvbixcbi8vICAgdXNlR2V0TWVRdWVyeSxcbi8vIH0gZnJvbSAnQC9saWIvc2VydmljZXMvYXV0aEFwaSc7XG5cbi8vIGltcG9ydCB7IG1lcmdlQ2FydHMgfSBmcm9tICdAL2xpYi9mZWF0dXJlcy9jYXJ0cy9jYXJ0c1NsaWNlJztcbi8vIGltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnLi91c2VUb2FzdCc7XG4vLyBpbXBvcnQgdHlwZSB7IExvZ2luRGF0YSwgUmVnaXN0ZXJEYXRhLCBVc2VyIH0gZnJvbSAnQC90eXBlcyc7XG4vLyBpbXBvcnQgeyBSb290U3RhdGUgfSBmcm9tICcuLi9zdG9yZSc7XG4vLyBpbXBvcnQgeyB1c2VBcHBEaXNwYXRjaCwgdXNlQXBwU2VsZWN0b3IgfSBmcm9tICcuL3JlZHV4JztcblxuLy8gZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XG4vLyAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuLy8gICBjb25zdCBkaXNwYXRjaCA9IHVzZUFwcERpc3BhdGNoKCk7XG4vLyAgIGNvbnN0IHsgc3VjY2VzcywgZXJyb3I6IHNob3dFcnJvciwgaW5mbyB9ID0gdXNlVG9hc3QoKTtcblxuLy8gICAvLyBSVEsgUXVlcnkgaG9va3Ncbi8vICAgY29uc3QgW2xvZ2luQXBpLCB7IGlzTG9hZGluZzogaXNMb2dpbkxvYWRpbmcgfV0gPSB1c2VMb2dpbk11dGF0aW9uKCk7XG4vLyAgIGNvbnN0IFtyZWdpc3RlckFwaSwgeyBpc0xvYWRpbmc6IGlzUmVnaXN0ZXJMb2FkaW5nIH1dID0gdXNlUmVnaXN0ZXJNdXRhdGlvbigpO1xuLy8gICBjb25zdCBbbG9nb3V0QXBpXSA9IHVzZUxvZ291dE11dGF0aW9uKCk7XG4vLyAgIGNvbnN0IHsgZGF0YTogdXNlciwgaXNMb2FkaW5nOiBpc01lTG9hZGluZywgaXNFcnJvcjogaXNNZUVycm9yLCByZWZldGNoIH0gPSB1c2VHZXRNZVF1ZXJ5KCk7XG5cbi8vICAgLy8gQ2FydCBzdGF0ZVxuLy8gICBjb25zdCBndWVzdENhcnQgPSB1c2VBcHBTZWxlY3Rvcigoc3RhdGU6Um9vdFN0YXRlKSA9PiBzdGF0ZS5jYXJ0Lmd1ZXN0Q2FydCk7XG4vLyAgIGNvbnN0IG5lZWRzQ2FydE1lcmdlID0gZ3Vlc3RDYXJ0Lmxlbmd0aCA+IDA7XG5cbi8vICAgLy8gTG9jYWwgYXV0aCBzdGF0ZVxuLy8gICBjb25zdCBbaXNBdXRoZW50aWNhdGVkLCBzZXRJc0F1dGhlbnRpY2F0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4vLyAgIC8vIFN5bmMgUlRLIFF1ZXJ5IGBnZXRNZWAg4oaSIGxvY2FsIHN0YXRlXG4vLyAgIHVzZUVmZmVjdCgoKSA9PiB7XG4vLyAgICAgaWYgKGlzTWVMb2FkaW5nKSByZXR1cm47XG4vLyAgICAgaWYgKHVzZXIpIHtcbi8vICAgICAgIHNldElzQXV0aGVudGljYXRlZCh0cnVlKTtcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKGZhbHNlKTtcbi8vICAgICB9XG4vLyAgIH0sIFt1c2VyLCBpc01lTG9hZGluZ10pO1xuXG4vLyAgIC8qID09PT09PT09PT09PT09PT09PT09IExPR0lOID09PT09PT09PT09PT09PT09PT09ICovXG4vLyAgIGNvbnN0IGxvZ2luID0gYXN5bmMgKGNyZWRlbnRpYWxzOiBMb2dpbkRhdGEpID0+IHtcbi8vICAgICB0cnkge1xuLy8gICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2dpbkFwaShjcmVkZW50aWFscykudW53cmFwKCk7XG5cbi8vICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuLy8gICAgICAgICBzaG93RXJyb3IocmVzcG9uc2UubWVzc2FnZSB8fCAnTG9naW4gZmFpbGVkJyk7XG4vLyAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5tZXNzYWdlKTtcbi8vICAgICAgIH1cblxuLy8gICAgICAgLy8gVXNlciBpcyBub3cgaW4gUlRLIFF1ZXJ5IGNhY2hlIHZpYSBgaW52YWxpZGF0ZXNUYWdzYFxuLy8gICAgICAgc3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlIHx8ICdXZWxjb21lIGJhY2shJyk7XG5cbi8vICAgICAgIC8vIE1lcmdlIGd1ZXN0IGNhcnRcbi8vICAgICAgIGlmIChuZWVkc0NhcnRNZXJnZSkge1xuLy8gICAgICAgICB0cnkge1xuLy8gICAgICAgICAgIGF3YWl0IGRpc3BhdGNoKG1lcmdlQ2FydHMoKSkudW53cmFwKCk7XG4vLyAgICAgICAgICAgc3VjY2VzcygnWW91ciBjYXJ0IGhhcyBiZWVuIG1lcmdlZCEnKTtcbi8vICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4vLyAgICAgICAgICAgaW5mbygnQ2FydCBzeW5jIGZhaWxlZC4gSXRlbXMgc3RpbGwgYXZhaWxhYmxlLicpO1xuLy8gICAgICAgICB9XG4vLyAgICAgICB9XG5cbi8vICAgICAgIHJvdXRlci5wdXNoKCcvJyk7XG4vLyAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4vLyAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuLy8gICAgICAgY29uc3QgbXNnID1cbi8vICAgICAgICAgZXJyb3I/LmRhdGE/Lm1lc3NhZ2UgfHxcbi8vICAgICAgICAgZXJyb3I/Lm1lc3NhZ2UgfHxcbi8vICAgICAgICAgKGVycm9yPy5zdGF0dXMgPT09IDQwMSAmJiAnSW52YWxpZCBlbWFpbCBvciBwYXNzd29yZCcpIHx8XG4vLyAgICAgICAgICdMb2dpbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uJztcbi8vICAgICAgIHNob3dFcnJvcihtc2cpO1xuLy8gICAgICAgdGhyb3cgZXJyb3I7XG4vLyAgICAgfVxuLy8gICB9O1xuXG4vLyAgIC8qID09PT09PT09PT09PT09PT09PT09IFJFR0lTVEVSID09PT09PT09PT09PT09PT09PT09ICovXG4vLyAgIGNvbnN0IHJlZ2lzdGVyID0gYXN5bmMgKHVzZXJEYXRhOiBSZWdpc3RlckRhdGEpID0+IHtcbi8vICAgICB0cnkge1xuLy8gICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZWdpc3RlckFwaSh1c2VyRGF0YSkudW53cmFwKCk7XG5cbi8vICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuLy8gICAgICAgICBzaG93RXJyb3IocmVzcG9uc2UubWVzc2FnZSB8fCAnUmVnaXN0cmF0aW9uIGZhaWxlZCcpO1xuLy8gICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UubWVzc2FnZSk7XG4vLyAgICAgICB9XG5cbi8vICAgICAgIHN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAnQWNjb3VudCBjcmVhdGVkISBXZWxjb21lIScpO1xuXG4vLyAgICAgICBpZiAobmVlZHNDYXJ0TWVyZ2UpIHtcbi8vICAgICAgICAgdHJ5IHtcbi8vICAgICAgICAgICBhd2FpdCBkaXNwYXRjaChtZXJnZUNhcnRzKCkpLnVud3JhcCgpO1xuLy8gICAgICAgICAgIHN1Y2Nlc3MoJ0NhcnQgbWVyZ2VkIHN1Y2Nlc3NmdWxseSEnKTtcbi8vICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4vLyAgICAgICAgICAgaW5mbygnQ2FydCBzeW5jIGZhaWxlZC4gSXRlbXMgc3RpbGwgYXZhaWxhYmxlLicpO1xuLy8gICAgICAgICB9XG4vLyAgICAgICB9XG5cbi8vICAgICAgIHJvdXRlci5wdXNoKCcvJyk7XG4vLyAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4vLyAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuLy8gICAgICAgY29uc3QgbXNnID1cbi8vICAgICAgICAgZXJyb3I/LmRhdGE/Lm1lc3NhZ2UgfHxcbi8vICAgICAgICAgZXJyb3I/Lm1lc3NhZ2UgfHxcbi8vICAgICAgICAgKGVycm9yPy5zdGF0dXMgPT09IDQwOSAmJiAnRW1haWwgYWxyZWFkeSBleGlzdHMnKSB8fFxuLy8gICAgICAgICAnUmVnaXN0cmF0aW9uIGZhaWxlZC4nO1xuLy8gICAgICAgc2hvd0Vycm9yKG1zZyk7XG4vLyAgICAgICB0aHJvdyBlcnJvcjtcbi8vICAgICB9XG4vLyAgIH07XG5cbi8vICAgLyogPT09PT09PT09PT09PT09PT09PT0gTE9HT1VUID09PT09PT09PT09PT09PT09PT09ICovXG4vLyAgIGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcbi8vICAgICB0cnkge1xuLy8gICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2dvdXRBcGkoKS51bndyYXAoKTtcbi8vICAgICAgIHN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAnTG9nZ2VkIG91dCBzdWNjZXNzZnVsbHknKTtcbi8vICAgICB9IGNhdGNoIChlcnIpIHtcbi8vICAgICAgIGluZm8oJ0xvZ2dlZCBvdXQgbG9jYWxseScpO1xuLy8gICAgIH0gZmluYWxseSB7XG4vLyAgICAgICBzZXRJc0F1dGhlbnRpY2F0ZWQoZmFsc2UpO1xuLy8gICAgICAgcm91dGVyLnB1c2goJy9hdXRoL2xvZ2luJyk7XG4vLyAgICAgfVxuLy8gICB9O1xuXG4vLyAgIC8qID09PT09PT09PT09PT09PT09PT09IENIRUNLIEFVVEggKG9uIG1vdW50KSA9PT09PT09PT09PT09PT09PT09PSAqL1xuLy8gICBjb25zdCBjaGVja0F1dGggPSBhc3luYyAoKSA9PiB7XG4vLyAgICAgaWYgKGlzTWVMb2FkaW5nKSByZXR1cm47XG4vLyAgICAgaWYgKGlzTWVFcnJvcikge1xuLy8gICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKGZhbHNlKTtcbi8vICAgICAgIHJldHVybiBudWxsO1xuLy8gICAgIH1cbi8vICAgICByZWZldGNoKCk7IC8vIEVuc3VyZSBmcmVzaCBkYXRhXG4vLyAgICAgcmV0dXJuIHVzZXI7XG4vLyAgIH07XG5cbi8vICAgLyogPT09PT09PT09PT09PT09PT09PT0gVVBEQVRFIFBST0ZJTEUgKG9wdGltaXN0aWMpID09PT09PT09PT09PT09PT09PT09ICovXG4vLyAgIGNvbnN0IHVwZGF0ZVByb2ZpbGUgPSBhc3luYyAodXNlckRhdGE6IFBhcnRpYWw8VXNlcj4pID0+IHtcbi8vICAgICAvLyBBc3N1bWluZyB5b3UgaGF2ZSB1cGRhdGVQcm9maWxlIG11dGF0aW9uIGluIGF1dGhBcGlcbi8vICAgICAvLyBGb3Igbm93LCBvcHRpbWlzdGljIHVwZGF0ZVxuLy8gICAgIGRpc3BhdGNoKHsgdHlwZTogJ2F1dGgvdXBkYXRlVXNlcicsIHBheWxvYWQ6IHVzZXJEYXRhIH0pO1xuLy8gICAgIHN1Y2Nlc3MoJ1Byb2ZpbGUgdXBkYXRlZCEnKTtcbi8vICAgfTtcblxuLy8gICByZXR1cm4ge1xuLy8gICAgIC8vIFN0YXRlXG4vLyAgICAgdXNlcixcbi8vICAgICBpc0F1dGhlbnRpY2F0ZWQsXG4vLyAgICAgaXNMb2FkaW5nOiBpc0xvZ2luTG9hZGluZyB8fCBpc1JlZ2lzdGVyTG9hZGluZyB8fCBpc01lTG9hZGluZyxcblxuLy8gICAgIC8vIEFjdGlvbnNcbi8vICAgICBsb2dpbixcbi8vICAgICByZWdpc3Rlcixcbi8vICAgICBsb2dvdXQsXG4vLyAgICAgY2hlY2tBdXRoLFxuLy8gICAgIHVwZGF0ZVByb2ZpbGUsXG5cbi8vICAgICAvLyBIZWxwZXJzXG4vLyAgICAgcmVmZXRjaFVzZXI6IHJlZmV0Y2gsXG4vLyAgICAgaXNNZUVycm9yLFxuLy8gICB9O1xuLy8gfTtcblxuXG4vLyBsaWIvaG9va3MvdXNlQXV0aC50c1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvbmF2aWdhdGlvbic7XG5pbXBvcnQge1xuICB1c2VMb2dpbk11dGF0aW9uLFxuICB1c2VSZWdpc3Rlck11dGF0aW9uLFxuICB1c2VMb2dvdXRNdXRhdGlvbixcbiAgdXNlR2V0TWVRdWVyeSxcbn0gZnJvbSAnQC9saWIvc2VydmljZXMvYXV0aEFwaSc7XG5pbXBvcnQgeyBtZXJnZUNhcnRzIH0gZnJvbSAnQC9saWIvZmVhdHVyZXMvY2FydHMvY2FydHNTbGljZSc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJy4vdXNlVG9hc3QnO1xuaW1wb3J0IHR5cGUgeyBMb2dpbkRhdGEsIFJlZ2lzdGVyRGF0YSwgVXNlciB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgUm9vdFN0YXRlIH0gZnJvbSAnQC9saWIvc3RvcmUnO1xuaW1wb3J0IHsgdXNlQXBwRGlzcGF0Y2gsIHVzZUFwcFNlbGVjdG9yIH0gZnJvbSAnLi9yZWR1eCc7XG5cbmV4cG9ydCBjb25zdCB1c2VBdXRoID0gKCkgPT4ge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBEaXNwYXRjaCgpO1xuICBjb25zdCB7IHN1Y2Nlc3MsIGVycm9yOiBzaG93RXJyb3IsIGluZm8gfSA9IHVzZVRvYXN0KCk7XG5cbiAgLy8gUlRLIFF1ZXJ5IGhvb2tzXG4gIGNvbnN0IFtsb2dpbkFwaSwgeyBpc0xvYWRpbmc6IGlzTG9naW5Mb2FkaW5nIH1dID0gdXNlTG9naW5NdXRhdGlvbigpO1xuICBjb25zdCBbcmVnaXN0ZXJBcGksIHsgaXNMb2FkaW5nOiBpc1JlZ2lzdGVyTG9hZGluZyB9XSA9IHVzZVJlZ2lzdGVyTXV0YXRpb24oKTtcbiAgY29uc3QgW2xvZ291dEFwaV0gPSB1c2VMb2dvdXRNdXRhdGlvbigpO1xuXG4gIC8vIEdFVCBNRTogVHJpZ2dlciBvbiBtb3VudFxuICBjb25zdCB7XG4gICAgZGF0YTogdXNlcixcbiAgICBpc0xvYWRpbmc6IGlzTWVMb2FkaW5nLFxuICAgIGlzRXJyb3I6IGlzTWVFcnJvcixcbiAgICByZWZldGNoLFxuICB9ID0gdXNlR2V0TWVRdWVyeSh1bmRlZmluZWQsIHtcbiAgICByZWZldGNoT25Nb3VudE9yQXJnQ2hhbmdlOiB0cnVlLCAvLyBUaGlzIGlzIGtleVxuICB9KTtcblxuICAvLyBDYXJ0IHN0YXRlXG4gIGNvbnN0IGd1ZXN0Q2FydCA9IHVzZUFwcFNlbGVjdG9yKChzdGF0ZTogUm9vdFN0YXRlKSA9PiBzdGF0ZS5jYXJ0Lmd1ZXN0Q2FydCk7XG4gIGNvbnN0IG5lZWRzQ2FydE1lcmdlID0gZ3Vlc3RDYXJ0Lmxlbmd0aCA+IDA7XG5cbiAgLy8gTG9jYWwgYXV0aCBzdGF0ZVxuICBjb25zdCBbaXNBdXRoZW50aWNhdGVkLCBzZXRJc0F1dGhlbnRpY2F0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIFN5bmMgdXNlciDihpIgaXNBdXRoZW50aWNhdGVkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzTWVMb2FkaW5nKSByZXR1cm47XG4gICAgc2V0SXNBdXRoZW50aWNhdGVkKCEhdXNlcik7XG4gIH0sIFt1c2VyLCBpc01lTG9hZGluZ10pO1xuXG4gIC8vIFJlZmV0Y2ggb24gbW91bnQgKGNyaXRpY2FsKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlZmV0Y2goKTtcbiAgfSwgW3JlZmV0Y2hdKTtcblxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBMT0dJTiA9PT09PT09PT09PT09PT09PT09PSAqL1xuICBjb25zdCBsb2dpbiA9IGFzeW5jIChjcmVkZW50aWFsczogTG9naW5EYXRhKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbG9naW5BcGkoY3JlZGVudGlhbHMpLnVud3JhcCgpO1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UubWVzc2FnZSk7XG5cbiAgICAgIHN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAnV2VsY29tZSBiYWNrIScpO1xuXG4gICAgICBpZiAobmVlZHNDYXJ0TWVyZ2UpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBkaXNwYXRjaChtZXJnZUNhcnRzKCkpLnVud3JhcCgpO1xuICAgICAgICAgIHN1Y2Nlc3MoJ0NhcnQgbWVyZ2VkIScpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBpbmZvKCdDYXJ0IHN5bmMgZmFpbGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcm91dGVyLnB1c2goJy8nKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zdCBtc2cgPVxuICAgICAgICBlcnJvcj8uZGF0YT8ubWVzc2FnZSB8fFxuICAgICAgICBlcnJvcj8ubWVzc2FnZSB8fFxuICAgICAgICAoZXJyb3I/LnN0YXR1cyA9PT0gNDAxICYmICdJbnZhbGlkIGNyZWRlbnRpYWxzJykgfHxcbiAgICAgICAgJ0xvZ2luIGZhaWxlZCc7XG4gICAgICBzaG93RXJyb3IobXNnKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfTtcblxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBSRUdJU1RFUiA9PT09PT09PT09PT09PT09PT09PSAqL1xuICBjb25zdCByZWdpc3RlciA9IGFzeW5jICh1c2VyRGF0YTogUmVnaXN0ZXJEYXRhKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVnaXN0ZXJBcGkodXNlckRhdGEpLnVud3JhcCgpO1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UubWVzc2FnZSk7XG5cbiAgICAgIHN1Y2Nlc3MoJ0FjY291bnQgY3JlYXRlZCEnKTtcblxuICAgICAgaWYgKG5lZWRzQ2FydE1lcmdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgZGlzcGF0Y2gobWVyZ2VDYXJ0cygpKS51bndyYXAoKTtcbiAgICAgICAgICBzdWNjZXNzKCdDYXJ0IG1lcmdlZCEnKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgaW5mbygnQ2FydCBzeW5jIGZhaWxlZCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJvdXRlci5wdXNoKCcvJyk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc3QgbXNnID1cbiAgICAgICAgZXJyb3I/LmRhdGE/Lm1lc3NhZ2UgfHxcbiAgICAgICAgZXJyb3I/Lm1lc3NhZ2UgfHxcbiAgICAgICAgKGVycm9yPy5zdGF0dXMgPT09IDQwOSAmJiAnRW1haWwgZXhpc3RzJykgfHxcbiAgICAgICAgJ1JlZ2lzdHJhdGlvbiBmYWlsZWQnO1xuICAgICAgc2hvd0Vycm9yKG1zZyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG5cbiAgLyogPT09PT09PT09PT09PT09PT09PT0gTE9HT1VUID09PT09PT09PT09PT09PT09PT09ICovXG4gIGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgbG9nb3V0QXBpKCkudW53cmFwKCk7XG4gICAgICBzdWNjZXNzKCdMb2dnZWQgb3V0Jyk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBpbmZvKCdMb2dnZWQgb3V0IGxvY2FsbHknKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKGZhbHNlKTtcbiAgICAgIHJvdXRlci5wdXNoKCcvYXV0aC9sb2dpbicpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHVzZXIsXG4gICAgaXNBdXRoZW50aWNhdGVkLFxuICAgIGlzTG9hZGluZzogaXNMb2dpbkxvYWRpbmcgfHwgaXNSZWdpc3RlckxvYWRpbmcgfHwgaXNNZUxvYWRpbmcsXG5cbiAgICBsb2dpbixcbiAgICByZWdpc3RlcixcbiAgICBsb2dvdXQsXG4gICAgcmVmZXRjaFVzZXI6IHJlZmV0Y2gsXG4gICAgaXNNZUVycm9yLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVJvdXRlciIsInVzZUxvZ2luTXV0YXRpb24iLCJ1c2VSZWdpc3Rlck11dGF0aW9uIiwidXNlTG9nb3V0TXV0YXRpb24iLCJ1c2VHZXRNZVF1ZXJ5IiwibWVyZ2VDYXJ0cyIsInVzZVRvYXN0IiwidXNlQXBwRGlzcGF0Y2giLCJ1c2VBcHBTZWxlY3RvciIsInVzZUF1dGgiLCJyb3V0ZXIiLCJkaXNwYXRjaCIsInN1Y2Nlc3MiLCJlcnJvciIsInNob3dFcnJvciIsImluZm8iLCJsb2dpbkFwaSIsImlzTG9hZGluZyIsImlzTG9naW5Mb2FkaW5nIiwicmVnaXN0ZXJBcGkiLCJpc1JlZ2lzdGVyTG9hZGluZyIsImxvZ291dEFwaSIsImRhdGEiLCJ1c2VyIiwiaXNNZUxvYWRpbmciLCJpc0Vycm9yIiwiaXNNZUVycm9yIiwicmVmZXRjaCIsInVuZGVmaW5lZCIsInJlZmV0Y2hPbk1vdW50T3JBcmdDaGFuZ2UiLCJndWVzdENhcnQiLCJzdGF0ZSIsImNhcnQiLCJuZWVkc0NhcnRNZXJnZSIsImxlbmd0aCIsImlzQXV0aGVudGljYXRlZCIsInNldElzQXV0aGVudGljYXRlZCIsImxvZ2luIiwiY3JlZGVudGlhbHMiLCJyZXNwb25zZSIsInVud3JhcCIsIkVycm9yIiwibWVzc2FnZSIsInB1c2giLCJtc2ciLCJzdGF0dXMiLCJyZWdpc3RlciIsInVzZXJEYXRhIiwibG9nb3V0IiwicmVmZXRjaFVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/hooks/useAuth.ts\n"));

/***/ })

});